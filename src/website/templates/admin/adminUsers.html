{% extends "admin/baseAdmin.html"%} {% block title %} Users {% endblock %}

{% block content%}
<div class="row no-gutter">

    <div class="col-md-6 bg-light">
        <div class="login d-flex align-items-center py-5 min-vh-100">

            <div class="container">
                <div class="row">
                    <div class="col-lg-10 col-xl-7 mx-auto">
                        <form method="POST">
                            <h3 align="center">Create a new account</h3>
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" class="form-control" id="name" name="name"
                                    placeholder="Enter name" />
                            </div>
                            <div class="form-group">
                                <label for="password1">Password</label>
                                <input type="password" class="form-control" id="password1" name="password1"
                                    placeholder="Enter password" />
                            </div>
                            <div class="form-group">
                                <label for="password2">Password (Confirm)</label>
                                <input type="password" class="form-control" id="password2" name="password2"
                                    placeholder="Confirm password" />
                            </div>
                            <br />
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <div class="col-md-6 my-auto text-center">
        <div class="container w-75" >
        <ul class="list-group">
            <h5 class="mb-1 p-3">Members:</h5>
            {% for name, url in user_list%}
            <li class="list-group-item list-group-item-action">
                <div class="row">
                    <div class="col-auto">
                        <img class="rounded-circle" src="{{url_for('static', filename= url)}}" width="40px" height="40px">
                    </div>
                    <div class="col">
                        {{ name }}
                    </div>
                    <div class="col-auto">
                        <button type="button" onclick='deleteAccount("{{name}}")' class="btn btn-danger">&times;</button>
                    </div>
                    <div class="col-auto">
                        <button type="button" class="btn btn-primary">
                            <img src="{{url_for('static', filename='pictures/editIcon.png')}}" width="20px">
                        </button>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
    </div>
</div>
{% endblock %}

{% block js%}
<script>
    function deleteAccount(name) {
        fetch("http://127.0.0.1:5000/admin/users/delete/" + name, {
            method: 'DELETE'
        }).then(location.reload())

    }

</script>
{% endblock %}